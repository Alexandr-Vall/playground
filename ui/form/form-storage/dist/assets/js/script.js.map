{"version":3,"sources":["node_modules/browser-pack/_prelude.js","source/assets/js/form-storage.js","source/assets/js/script.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","defaults","formElements","localStorageKey","FormStorage","element","options","_classCallCheck","this","Object","assign","onSubmit","bind","addEventListeners","getForm","formStorageKey","window","localStorage","getItem","name","JSON","parse","forEach","field","input","querySelector","id","checked","value","form","Array","from","querySelectorAll","join","push","setItem","stringify","setForm","addEventListener","document","_formStorage2","default"],"mappings":"CAAA,SAAAA,EAAAC,EAAAC,EAAAC,GAAA,SAAAC,EAAAC,EAAAC,GAAA,IAAAJ,EAAAG,GAAA,CAAA,IAAAJ,EAAAI,GAAA,CAAA,IAAAE,EAAA,mBAAAC,SAAAA,QAAA,IAAAF,GAAAC,EAAA,OAAAA,EAAAF,GAAA,GAAA,GAAAI,EAAA,OAAAA,EAAAJ,GAAA,GAAA,IAAAK,EAAA,IAAAC,MAAA,uBAAAN,EAAA,KAAA,MAAAK,EAAAE,KAAA,mBAAAF,EAAA,IAAAG,EAAAX,EAAAG,IAAAS,YAAAb,EAAAI,GAAA,GAAAU,KAAAF,EAAAC,QAAA,SAAAd,GAAA,IAAAE,EAAAD,EAAAI,GAAA,GAAAL,GAAA,OAAAI,EAAAF,GAAAF,IAAAa,EAAAA,EAAAC,QAAAd,EAAAC,EAAAC,EAAAC,GAAA,OAAAD,EAAAG,GAAAS,QAAA,IAAA,IAAAL,EAAA,mBAAAD,SAAAA,QAAAH,EAAA,EAAAA,EAAAF,EAAAa,OAAAX,IAAAD,EAAAD,EAAAE,IAAA,OAAAD,EAAA,EAAAa,GAAA,SAAAT,EAAAU,EAAAJ,wZCAMK,GACJC,cACE,yBACA,qBACA,sBACA,uBACA,uBACA,sBACA,sBACA,uBACA,oBACA,qBACA,qBACA,oBACA,SACA,YAEFC,gBAAiB,mBAGbC,aAEJ,SAAAA,EAAYC,EAASC,GAASC,EAAAC,KAAAJ,GAC5BK,OAAOC,OAAOF,KAAMP,EAAUK,GAC9BE,KAAKH,QAAUA,EAEfG,KAAKG,SAAWH,KAAKG,SAASC,KAAKJ,MACnCA,KAAKK,oBAELL,KAAKM,sDAGG,IACAT,EAAYG,KAAZH,QACFU,EAAiBC,OAAOC,aAAaC,QAAWV,KAAKL,gBAApC,IAAuDE,EAAQc,MAElFJ,GACFK,KAAKC,MAAMN,GAAgBO,QAAQ,SAAAC,GACjC,IAAMC,EAAQnB,EAAQoB,cAAcF,EAAMG,IAE1CF,EAAMG,QAAUJ,EAAMI,QACtBH,EAAMI,MAAUL,EAAMK,0CAKlB,IACAvB,EAAYG,KAAZH,QACFwB,KAENC,MAAMC,KAAK1B,EAAQ2B,iBAAiBxB,KAAKN,aAAa+B,KAAK,QAAQX,QAAQ,SAAAE,GACzEK,EAAKK,MACHR,GAAA,IAAaF,EAAME,GACnBC,QAASH,EAAMG,QACfC,MAASJ,EAAMI,UAInBZ,OAAOC,aAAakB,QAAW3B,KAAKL,gBAApC,IAAuDE,EAAQc,KAAQC,KAAKgB,UAAUP,uCAItFrB,KAAK6B,sDAIL7B,KAAKH,QAAQiC,iBAAiB,SAAU9B,KAAKG,6BAKlCP,uCCvEf,wDAAAd,EAAA,mBAEAwC,MAAMC,KAAKQ,SAASP,iBAAiB,qBAAqBV,QAAQ,SAAAO,GAChE,IAAAW,EAAAC,QAAgBZ","file":"script.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","const defaults = {\n  formElements: [\n    'input[type=\"checkbox\"]',\n    'input[type=\"date\"]',\n    'input[type=\"email\"]',\n    'input[type=\"hidden\"]',\n    'input[type=\"number\"]',\n    'input[type=\"radio\"]',\n    'input[type=\"range\"]',\n    'input[type=\"search\"]',\n    'input[type=\"tel\"]',\n    'input[type=\"text\"]',\n    'input[type=\"time\"]',\n    'input[type=\"url\"]',\n    'select',\n    'textarea'\n  ],\n  localStorageKey: 'js-form-storage'\n};\n\nclass FormStorage {\n\n  constructor(element, options) {\n    Object.assign(this, defaults, options);\n    this.element = element;\n\n    this.onSubmit = this.onSubmit.bind(this);\n    this.addEventListeners();\n\n    this.getForm();\n  }\n\n  getForm() {\n    const { element } = this;\n    const formStorageKey = window.localStorage.getItem(`${this.localStorageKey}-${element.name}`);\n\n    if (formStorageKey) {\n      JSON.parse(formStorageKey).forEach(field => {\n        const input = element.querySelector(field.id);\n\n        input.checked = field.checked;\n        input.value   = field.value;\n      });\n    }\n  }\n\n  setForm() {\n    const { element } = this;\n    const form = [];\n\n    Array.from(element.querySelectorAll(this.formElements.join(', '))).forEach(input => {\n      form.push({\n        id     : `#${input.id}`,\n        checked: input.checked,\n        value  : input.value\n      });\n    })\n\n    window.localStorage.setItem(`${this.localStorageKey}-${element.name}`, JSON.stringify(form));\n  }\n\n  onSubmit() {\n    this.setForm();\n  }\n\n  addEventListeners() {\n    this.element.addEventListener('submit', this.onSubmit);\n  }\n\n}\n\nexport default FormStorage;\n","import FormStorage from './form-storage';\n\nArray.from(document.querySelectorAll('.js-form-storage')).forEach(form => {\n  new FormStorage(form);\n});\n"]}